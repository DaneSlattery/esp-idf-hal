<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Provide an input for key derivation in the form of a key."><title>psa_key_derivation_input_key in esp_idf_sys - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (3406ada96 2024-02-21)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-c37d3936c59ababd.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_idf_sys</a><span class="version">0.34.1</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../esp_idf_sys/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">psa_key_derivation_input_key</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-62f8a83bf117f72c/out/bindings.rs.html#33544-33548">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_key_derivation_input_key(
    operation: *mut <a class="type" href="type.psa_key_derivation_operation_t.html" title="type esp_idf_sys::psa_key_derivation_operation_t">psa_key_derivation_operation_t</a>,
    step: <a class="type" href="type.psa_key_derivation_step_t.html" title="type esp_idf_sys::psa_key_derivation_step_t">psa_key_derivation_step_t</a>,
    key: <a class="type" href="type.mbedtls_svc_key_id_t.html" title="type esp_idf_sys::mbedtls_svc_key_id_t">mbedtls_svc_key_id_t</a>
) -&gt; <a class="type" href="type.psa_status_t.html" title="type esp_idf_sys::psa_status_t">psa_status_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Provide an input for key derivation in the form of a key.</p>
<p>Which inputs are required and in what order depends on the algorithm.
Refer to the documentation of each key derivation or key agreement
algorithm for information.</p>
<p>This function obtains input from a key object, which is usually correct for
secret inputs or for non-secret personalization strings kept in the key
store. To pass a non-secret parameter which is not in the key store,
call psa_key_derivation_input_bytes() instead of this function.
Refer to the documentation of individual step types
(<code>PSA_KEY_DERIVATION_INPUT_xxx</code> values of type ::psa_key_derivation_step_t)
for more information.</p>
<p>If this function returns an error status, the operation enters an error
state and must be aborted by calling psa_key_derivation_abort().</p>
<p>\param[in,out] operation       The key derivation operation object to use.
It must have been set up with
psa_key_derivation_setup() and must not
have produced any output yet.
\param step                    Which step the input data is for.
\param key                     Identifier of the key. It must have an
appropriate type for step and must allow the
usage #PSA_KEY_USAGE_DERIVE or
#PSA_KEY_USAGE_VERIFY_DERIVATION (see note)
and the algorithm used by the operation.</p>
<p>\note Once all inputs steps are completed, the operations will allow:</p>
<ul>
<li>psa_key_derivation_output_bytes() if each input was either a direct input
or  a key with #PSA_KEY_USAGE_DERIVE set;</li>
<li>psa_key_derivation_output_key() if the input for step
#PSA_KEY_DERIVATION_INPUT_SECRET or #PSA_KEY_DERIVATION_INPUT_PASSWORD
was from a key slot with #PSA_KEY_USAGE_DERIVE and each other input was
either a direct input or a key with #PSA_KEY_USAGE_DERIVE set;</li>
<li>psa_key_derivation_verify_bytes() if each input was either a direct input
or  a key with #PSA_KEY_USAGE_VERIFY_DERIVATION set;</li>
<li>psa_key_derivation_verify_key() under the same conditions as
psa_key_derivation_verify_bytes().</li>
</ul>
<p>\retval #PSA_SUCCESS
Success.
\retval #PSA_ERROR_INVALID_HANDLE \emptydescription
\retval #PSA_ERROR_NOT_PERMITTED
The key allows neither #PSA_KEY_USAGE_DERIVE nor
#PSA_KEY_USAGE_VERIFY_DERIVATION, or it doesn’t allow this
algorithm.
\retval #PSA_ERROR_INVALID_ARGUMENT
\c step is not compatible with the operation’s algorithm, or
\c step does not allow key inputs of the given type
or does not allow key inputs at all.
\retval #PSA_ERROR_INSUFFICIENT_MEMORY \emptydescription
\retval #PSA_ERROR_COMMUNICATION_FAILURE \emptydescription
\retval #PSA_ERROR_HARDWARE_FAILURE \emptydescription
\retval #PSA_ERROR_CORRUPTION_DETECTED \emptydescription
\retval #PSA_ERROR_STORAGE_FAILURE \emptydescription
\retval #PSA_ERROR_BAD_STATE
The operation state is not valid for this input \p step, or
the library has not been previously initialized by psa_crypto_init().
It is implementation-dependent whether a failure to initialize
results in this error code.</p>
</div></details></section></div></main></body></html>