<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief Import a key in binary format."><title>psa_import_key in esp_idf_hal::sys - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (3406ada96 2024-02-21)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-c37d3936c59ababd.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_idf_hal</a><span class="version">0.43.1</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In esp_idf_hal::sys</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../esp_idf_hal/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a>::<wbr><a class="fn" href="#">psa_import_key</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-62f8a83bf117f72c/out/bindings.rs.html#33063-33068">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_import_key(
    attributes: *const <a class="struct" href="struct.psa_key_attributes_s.html" title="struct esp_idf_hal::sys::psa_key_attributes_s">psa_key_attributes_s</a>,
    data: *const u8,
    data_length: usize,
    key: *mut u32
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief Import a key in binary format.</p>
<p>This function supports any output from psa_export_key(). Refer to the
documentation of psa_export_public_key() for the format of public keys
and to the documentation of psa_export_key() for the format for
other key types.</p>
<p>The key data determines the key size. The attributes may optionally
specify a key size; in this case it must match the size determined
from the key data. A key size of 0 in \p attributes indicates that
the key size is solely determined by the key data.</p>
<p>Implementations must reject an attempt to import a key of size 0.</p>
<p>This specification supports a single format for each key type.
Implementations may support other formats as long as the standard
format is supported. Implementations that support other formats
should ensure that the formats are clearly unambiguous so as to
minimize the risk that an invalid input is accidentally interpreted
according to a different format.</p>
<p>\param[in] attributes    The attributes for the new key.
The key size is always determined from the
\p data buffer.
If the key size in \p attributes is nonzero,
it must be equal to the size from \p data.
\param[out] key          On success, an identifier to the newly created key.
For persistent keys, this is the key identifier
defined in \p attributes.
\c 0 on failure.
\param[in] data    Buffer containing the key data. The content of this
buffer is interpreted according to the type declared
in \p attributes.
All implementations must support at least the format
described in the documentation
of psa_export_key() or psa_export_public_key() for
the chosen type. Implementations may allow other
formats, but should be conservative: implementations
should err on the side of rejecting content if it
may be erroneous (e.g. wrong type or truncated data).
\param data_length Size of the \p data buffer in bytes.</p>
<p>\retval #PSA_SUCCESS
Success.
If the key is persistent, the key material and the key’s metadata
have been saved to persistent storage.
\retval #PSA_ERROR_ALREADY_EXISTS
This is an attempt to create a persistent key, and there is
already a persistent key with the given identifier.
\retval #PSA_ERROR_NOT_SUPPORTED
The key type or key size is not supported, either by the
implementation in general or in this particular persistent location.
\retval #PSA_ERROR_INVALID_ARGUMENT
The key attributes, as a whole, are invalid, or
the key data is not correctly formatted, or
the size in \p attributes is nonzero and does not match the size
of the key data.
\retval #PSA_ERROR_INSUFFICIENT_MEMORY \emptydescription
\retval #PSA_ERROR_INSUFFICIENT_STORAGE \emptydescription
\retval #PSA_ERROR_COMMUNICATION_FAILURE \emptydescription
\retval #PSA_ERROR_DATA_CORRUPT \emptydescription
\retval #PSA_ERROR_DATA_INVALID \emptydescription
\retval #PSA_ERROR_STORAGE_FAILURE \emptydescription
\retval #PSA_ERROR_HARDWARE_FAILURE \emptydescription
\retval #PSA_ERROR_CORRUPTION_DETECTED \emptydescription
\retval #PSA_ERROR_BAD_STATE
The library has not been previously initialized by psa_crypto_init().
It is implementation-dependent whether a failure to initialize
results in this error code.</p>
</div></details></section></div></main></body></html>